<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Criminal and Antisocial History Assessment Tool</title>
    <style>
        .section {
            margin-bottom: 20px;
        }
        .subsection {
            margin-left: 20px;
        }
    </style>
</head>
<body>
    <h1>Criminal and Antisocial History Assessment Tool</h1>

    <div class="section">
        <h2>Criminal History</h2>
        <form id="criminal-history-form">
            <h3>Convictions</h3>
            <input type="checkbox" name="criminal-history" value="No known criminal history."> No known criminal history<br>
            <input type="checkbox" name="criminal-history" value="Convicted of non-violent offenses."> Convicted of non-violent offenses<br>
            <input type="checkbox" name="criminal-history" value="Convicted of violent offenses."> Convicted of violent offenses<br>
            <input type="checkbox" name="criminal-history" value="History of substance-related offenses."> History of substance-related offenses<br>
            
            <h3>Legal Issues</h3>
            <input type="checkbox" name="criminal-history" value="Incarcerated."> Incarcerated<br>
            <input type="checkbox" name="criminal-history" value="History of probation violations."> History of probation violations<br>
            <input type="checkbox" name="criminal-history" value="Experienced legal issues but no convictions."> Experienced legal issues but no convictions<br>
            <input type="checkbox" name="criminal-history" value="Currently involved in legal proceedings."> Currently involved in legal proceedings<br>
        </form>
    </div>

    <div class="section">
        <h2>Antisocial Behaviors</h2>
        <form id="antisocial-behaviors-form">
            <h3>Behavioral Issues</h3>
            <input type="checkbox" name="antisocial-behaviors" value="Engaged in aggressive behaviors."> Engaged in aggressive behaviors<br>
            <input type="checkbox" name="antisocial-behaviors" value="Lack of remorse for actions."> Lack of remorse for actions<br>
            <input type="checkbox" name="antisocial-behaviors" value="History of lying and deceit."> History of lying and deceit<br>
            <input type="checkbox" name="antisocial-behaviors" value="History of stealing."> History of stealing<br>
            
            <h3>Additional Behaviors</h3>
            <input type="checkbox" name="antisocial-behaviors" value="History of vandalism or property destruction."> History of vandalism or property destruction<br>
            <input type="checkbox" name="antisocial-behaviors" value="Manipulated or exploited others for personal gain."> Manipulated or exploited others for personal gain<br>
            <input type="checkbox" name="antisocial-behaviors" value="Engaged in reckless or impulsive behaviors."> Engaged in reckless or impulsive behaviors<br>
        </form>
    </div>

    <div class="section">
        <h2>Influences and Environment</h2>
        <form id="influences-environment-form">
            <input type="checkbox" name="influences-environment" value="Influenced by antisocial peers."> Influenced by antisocial peers<br>
            <input type="checkbox" name="influences-environment" value="Grew up in a high-crime area."> Grew up in a high-crime area<br>
            <input type="checkbox" name="influences-environment" value="Family history of criminal behavior."> Family history of criminal behavior<br>
            <input type="checkbox" name="influences-environment" value="Lacked positive role models."> Lacked positive role models<br>
            <input type="checkbox" name="influences-environment" value="Exposed to substance abuse within the family."> Exposed to substance abuse within the family<br>
            <input type="checkbox" name="influences-environment" value="Exposed to domestic violence."> Exposed to domestic violence<br>
            <input type="checkbox" name="influences-environment" value="Supportive and nurturing family relationships."> Supportive and nurturing family relationships<br>
        </form>
    </div>

    <div class="section">
        <h2>Impact on Mental Health</h2>
        <form id="impact-on-mental-health-form">
            <h3>Stress and Anxiety</h3>
            <input type="checkbox" name="impact-on-mental-health" value="Significant stress or anxiety from criminal history."> Significant stress or anxiety from criminal history<br>
            <input type="checkbox" name="impact-on-mental-health" value="Social isolation due to antisocial behaviors."> Social isolation due to antisocial behaviors<br>
            <input type="checkbox" name="impact-on-mental-health" value="Ongoing guilt or shame about past behaviors."> Ongoing guilt or shame about past behaviors<br>
            <input type="checkbox" name="impact-on-mental-health" value="Stigmatized by criminal history."> Stigmatized by criminal history<br>
            
            <h3>Treatment and Coping</h3>
            <input type="checkbox" name="impact-on-mental-health" value="Received mental health treatment for behaviors."> Received mental health treatment for behaviors<br>
            <input type="checkbox" name="impact-on-mental-health" value="Improved mental health post-treatment."> Improved mental health post-treatment<br>
            <input type="checkbox" name="impact-on-mental-health" value="Developed coping mechanisms for past behaviors."> Developed coping mechanisms for past behaviors<br>
            <input type="checkbox" name="impact-on-mental-health" value="Support from community programs or groups."> Support from community programs or groups<br>
            <input type="checkbox" name="impact-on-mental-health" value="Family support in dealing with impact."> Family support in dealing with impact<br>
            
            <h3>General Impact</h3>
            <input type="checkbox" name="impact-on-mental-health" value="No significant impact on mental health from criminal history."> No significant impact on mental health from criminal history<br>
            <input type="checkbox" name="impact-on-mental-health" value="Worsening mental health since behaviors."> Worsening mental health since behaviors<br>
            <input type="checkbox" name="impact-on-mental-health" value="Chronic mental health conditions from criminal behavior (e.g., depression, PTSD)."> Chronic mental health conditions from criminal behavior (e.g., depression, PTSD)<br>
            <input type="checkbox" name="impact-on-mental-health" value="Ongoing mental health challenges due to environment."> Ongoing mental health challenges due to environment<br>
        </form>
    </div>

    <button onclick="generateAIParagraph()">Generate and Copy Paragraph</button>

    <h2>Generated Paragraph</h2>
    <p id="generated-paragraph"></p>

    <script>
        async function generateAIParagraph() {
            const sections = [
                'criminal-history-form',
                'antisocial-behaviors-form',
                'influences-environment-form',
                'impact-on-mental-health-form'
            ];

            let data = '';
            sections.forEach(id => {
                const form = document.getElementById(id);
                if (form) {
                    const selectedOptions = form.querySelectorAll('input[type="checkbox"]:checked');
                    selectedOptions.forEach(option => {
                        data += `${option.value} `;
                    });
                } else {
                    console.error(`Form with id ${id} not found.`);
                }
            });

            if (!data) {
                data = 'The patient reported no significant issues regarding their criminal and antisocial history.';
            }

            console.log(`Data sent to API: ${data}`);

            try {
                const response = await fetch('https://api-inference.huggingface.co/models/gpt2', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer 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' // Replace with your actual Hugging Face API key
                    },
                    body: JSON.stringify({
                        inputs: data,
                        max_tokens: 150
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }

                const result = await response.json();
                const paragraph = result[0].generated_text.trim();

                const paragraphElement = document.getElementById('generated-paragraph');
                paragraphElement.textContent = paragraph;

                // Copy the generated paragraph to the clipboard
                await navigator.clipboard.writeText(paragraph);
                alert('Paragraph copied to clipboard');
            } catch (error) {
                console.error('Error:', error);
                alert('Failed to generate paragraph');
            }
        }
    </script>
</body>
</html>
